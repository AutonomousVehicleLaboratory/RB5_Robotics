
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="RB5 ROBOTICS TUTORIALS">
    <title>Tag: SLAM Application - RB5 ROBOTICS TUTORIALS</title>
    <meta name="author" content="RB5 ROBOTICS TUTORIALS">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta name="description" content="Some description for subtitle">
<meta property="og:type" content="blog">
<meta property="og:title" content="RB5 ROBOTICS TUTORIALS">
<meta property="og:url" content="https://autonomousvehiclelaboratory.github.io/RB5_Robotics_Tutorials/tags/SLAM-Application/index.html">
<meta property="og:site_name" content="RB5 ROBOTICS TUTORIALS">
<meta property="og:description" content="Some description for subtitle">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="RB5 ROBOTICS TUTORIALS">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://autonomousvehiclelaboratory.github.io/RB5_Robotics_Tutorials/assets/images/avl-letters.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/RB5_Robotics_Tutorials/assets/css/style-64qguiewfoxvxmp0xtsq6t9zwhtgymxalbr3hofnf6gpcss5mvrocwased14.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/RB5_Robotics_Tutorials/"
            aria-label=""
        >
            RB5 ROBOTICS TUTORIALS
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /RB5_Robotics_Tutorials/#about"
            >
        
        
            <img class="header-picture" src="/RB5_Robotics_Tutorials/assets/images/avl-letters.png" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/RB5_Robotics_Tutorials/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/RB5_Robotics_Tutorials/assets/images/avl-letters.png" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">RB5 ROBOTICS TUTORIALS</h4>
                
                    <h5 class="sidebar-profile-bio"><p>A set of Robotics Tutorials developed for the RB5 Robotics Development Platform from Qualcomm. Authors are from the Contextual Robotics Institute at UC San Diego.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/RB5_Robotics_Tutorials/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/RB5_Robotics_Tutorials/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/RB5_Robotics_Tutorials/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/AutonomousVehicleLaboratory"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:avl@eng.ucsd.edu"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/RB5_Robotics_Tutorials/2022/05/18/3%20Robotics%20Applications/setup-orb-slam3-on-rb5/"
                            aria-label=": (3) Setup ORB_SLAM3 on Qualcomm Robotics RB5"
                        >
                            (3) Setup ORB_SLAM3 on Qualcomm Robotics RB5
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-05-18T17:12:21-07:00">
	
		    May 18, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/RB5_Robotics_Tutorials/categories/3-Robotics-Applications/">3 Robotics Applications</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>This tutorial will guide you towards running ORB_SLAM3 on Qualcomm Robotics RB5. ORB_SLAM3 is a popular software package that can perform visual SLAM and visual-inertial SLAM. The algorithm is fast and therefore suitable for the Qualcomm Robotics RB5 platform.</p>
<h2 id="Install-ORB-SLAM3-Library"><a href="#Install-ORB-SLAM3-Library" class="headerlink" title="Install ORB_SLAM3 Library"></a>Install ORB_SLAM3 Library</h2><p>The code from ORB_SLAM3 original repository doesn’t work right out of box on Qualcomm Robotics RB5. We created a version that we tested on Qualcomm Robotics RB5 and works well. You can download the code from <a target="_blank" rel="noopener" href="https://github.com/AutonomousVehicleLaboratory/ORB_SLAM3_RB5">https://github.com/AutonomousVehicleLaboratory/ORB_SLAM3_RB5</a>.</p>
<p>After downloading the code, follow the README.md to compile the ORB_SLAM3 library. A simplified version are also given below.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Install the required dependencies</span><br><span class="line">git clone https://github.com/AutonomousVehicleLaboratory/ORB_SLAM3_RB5</span><br><span class="line">cd ORB_SLAM3_RB5</span><br><span class="line">chmod +x build.sh</span><br><span class="line">./build.sh</span><br></pre></td></tr></table></figure>

<h2 id="ROS-wrapper-for-ORB-SLAM3-on-Qualcomm-Robotics-RB5"><a href="#ROS-wrapper-for-ORB-SLAM3-on-Qualcomm-Robotics-RB5" class="headerlink" title="ROS wrapper for ORB_SLAM3 on Qualcomm Robotics RB5"></a>ROS wrapper for ORB_SLAM3 on Qualcomm Robotics RB5</h2><p>We create wrapper for the ORB_SLAM3 api in both <a target="_blank" rel="noopener" href="https://github.com/AutonomousVehicleLaboratory/rb5_ros">ROS</a> and <a target="_blank" rel="noopener" href="https://github.com/AutonomousVehicleLaboratory/rb5_ros2">ROS2</a>. These wrappers handles communication and data conversion. The ROS version was tested on ROS melodic and the ROS2 version was tested on RO2 dashing.</p>
<p>The communication part includes receiving sensor messages published by other ROS node. The sensors include camera and IMU. If both of them are used, the wrapper also handles synchronization before passing them to the ORB_SLAM3 library. After the pose is given by the output from the ORB_SLAM3 library, we then convert it into transformation and publish to ROS TF.</p>
<p>We seperate the ORB_SLAM3 library and the ROS wrapper so that we don’t need to include this library into the ROS workspace. You will need to modify the line 4 of the CMakeLists.txt file in the ROS and ROS2 packages to give the correct ORB_SLAM3 library path so that these nodes can be built successfully.</p>
<p>For the ROS1 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># If you don&#x27;t already have a works space, create one first.</span><br><span class="line">mkdir -p rosws/src</span><br><span class="line"></span><br><span class="line"># Go to the source folder</span><br><span class="line">cd rosws/src</span><br><span class="line"></span><br><span class="line"># Clone the repository</span><br><span class="line">git clone https://github.com/AutonomousVehicleLaboratory/rb5_ros</span><br></pre></td></tr></table></figure>

<p>Before you build your package, set the path in the CMakeLists.txt file in the ORB_SLAM3_RB5 package from the repository that you just cloned.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(ORB_SLAM3_SOURCE_DIR &quot;path/to/ORB_SLAM3_RB5_LIB/&quot;)</span><br></pre></td></tr></table></figure>
<p>Note that this path refers to the folder where the customized ORB_SLAM3 library from <a target="_blank" rel="noopener" href="https://github.com/AutonomousVehicleLaboratory/ORB_SLAM3_RB5">https://github.com/AutonomousVehicleLaboratory/ORB_SLAM3_RB5</a> is cloned to.</p>
<p>Then, build your package.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Return to the root folder of the workspace.</span><br><span class="line"># Include the ros tools, this assumes you have ROS1 melodic installed</span><br><span class="line">source /opt/ros/melodic/setup.bash</span><br><span class="line"></span><br><span class="line"># Build only this package</span><br><span class="line">catkin_make --only-pkg-with-deps ORB_SLAM3_RB5</span><br></pre></td></tr></table></figure>

<p>To run the package, first start the roscore in a new terminal</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source /opt/ros/melodic/setup.bash</span><br><span class="line">roscore</span><br></pre></td></tr></table></figure>

<p>Then in another terminal, go into the workspace folder</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># source the ros workspace</span><br><span class="line">source devel/setup.bash</span><br><span class="line"></span><br><span class="line"># run the program</span><br><span class="line">rosrun ORB_SLAM3_RB5 Mono /path/to/ORB_SLAM3_RB5_library/Vocabulary/ORBvoc.yaml /path/to/ORB_SLAM3_RB5_library/Examples/Monocular/Euroc.yaml</span><br></pre></td></tr></table></figure>
<p>Notice that you should use a different yaml file to reflect the parameters of your camera.</p>
<p>When running the ROS node, you will need to access camera using the ROS package we mentioned in the basic tutorial <a href="https://autonomousvehiclelaboratory.github.io/RB5_Robotics_Tutorials/2022/02/15/2%20Accessing%20Devices/accessing-camera-on-rb5/">accessing cameras</a>.</p>
<p>For the ROS version, the wrapper allows you to run the Monocular version of ORB-SLAM3 on Qualcomm Robotics RB5. The text interface will work with wayland desktop.</p>
<div class="figure " style="width:;"><img class="fig-img" src="ORB-SLAM3-Gnome-Terminal.png" alt="ORB-SLAM3 running in a Gnome-Terminal"><span class="caption">ORB-SLAM3 running in a Gnome-Terminal</span></div>

<p>In the terminal, you can see the translation vector and rotation matrix being printed. A trajectory file named “KeyFrameTrajectory.txt” will be saved into the root of the workspace if the program is stoped by “Ctrl+C”.</p>
<p>You can also launch RViz on the gnome desktop that you setup following the <a href="https://autonomousvehiclelaboratory.github.io/RB5_Robotics_Tutorials/2022/05/18/1%20Initial%20Set-up/visualization-tools/">tutorial</a>.</p>
<div class="figure " style="width:;"><img class="fig-img" src="ORB-SLAM3-RViz.png" alt="ORB-SLAM3 pose displayed in RViz"><span class="caption">ORB-SLAM3 pose displayed in RViz</span></div>

<p>For the ROS2 version, the wrapper allows you to run the visual inertial SLAM with a single camera and the IMU on Qualcomm Robotics RB5. The IMU data can be accessed through a prebuilt ROS2 package that is tested on ROS2 dashing.</p>
<p>Similarly, first clone it to your workspace.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># If you don&#x27;t already have a works space, create one first.</span><br><span class="line">mkdir -p ros2ws/src</span><br><span class="line"></span><br><span class="line"># Go to the source folder</span><br><span class="line">cd ros2ws/src</span><br><span class="line"></span><br><span class="line"># Clone the repository</span><br><span class="line">git clone https://github.com/AutonomousVehicleLaboratory/rb5_ros2</span><br></pre></td></tr></table></figure>

<p>Before you build your package, set the path in the CMakeLists.txt file in the ORB_SLAM3_RB5 package from the repository that you just cloned.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(ORB_SLAM3_SOURCE_DIR &quot;path/to/ORB_SLAM3_RB5_LIB/&quot;)</span><br></pre></td></tr></table></figure>

<p>Note that this path refers to the folder where the customized ORB_SLAM3 library from <a target="_blank" rel="noopener" href="https://github.com/AutonomousVehicleLaboratory/ORB_SLAM3_RB5">https://github.com/AutonomousVehicleLaboratory/ORB_SLAM3_RB5</a> is cloned to.</p>
<p>Then, build your package.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Return to the root folder of the workspace.</span><br><span class="line"># Include the ros tools, this assumes you have ROS2 dashing installed</span><br><span class="line">source /opt/ros/dashing/setup.bash</span><br><span class="line"></span><br><span class="line"># Build only this package</span><br><span class="line">colcon build --packages-select orb_slam3_rb5_ros2</span><br></pre></td></tr></table></figure>

<p>Then you can run the package.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Source the ROS2 workspace</span><br><span class="line">source install/setup.bash</span><br><span class="line"></span><br><span class="line"># run the Monocular version</span><br><span class="line">ros2 run orb_slam3_rb5_ros2 Mono /path/to/ORB_SLAM3_RB5_library/Vocabulary/ORBvoc.yaml /path/to/ORB_SLAM3_RB5_library/Examples/Monocular/Euroc.yaml</span><br><span class="line"></span><br><span class="line"># run the Monocular-Inertial version</span><br><span class="line">ros2 run orb_slam3_rb5_ros2 Mono_Inertial /path/to/ORB_SLAM3_RB5_library/Vocabulary/ORBvoc.yaml /path/to/ORB_SLAM3_RB5_library/Examples/Monocular-Inertial/Euroc.yaml</span><br></pre></td></tr></table></figure>

<p>If You encounter error while loading shared libraries, add the library to path such as:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export LD_LIBRARY_PATH=$&#123;LD_LIBRARY_PATH&#125;:/path/to/ORB_SLAM3_RB5_LIB/lib:/path/to/Pangolin/build</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/RB5_Robotics_Tutorials/2022/05/18/3%20Robotics%20Applications/setup-orb-slam3-on-rb5/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2022 RB5 ROBOTICS TUTORIALS. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/RB5_Robotics_Tutorials/assets/images/avl-letters.png" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">RB5 ROBOTICS TUTORIALS</h4>
        
            <div id="about-card-bio"><p>A set of Robotics Tutorials developed for the RB5 Robotics Development Platform from Qualcomm. Authors are from the Contextual Robotics Institute at UC San Diego.</p>
</div>
        
        
            <div id="about-card-bio">
                <p>Contributors</p>

                <!-- <i class="fa fa-briefcase"></i>
                <br/> -->
                <p>Henrik I. Christensen, David Paz, Henry Zhang, Anirudh Ramesh.</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/RB5_Robotics_Tutorials/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/RB5_Robotics_Tutorials/assets/js/script-ouavugrvd9qj6lg3dktmularsze8hx0ahydxl4n9zvn5qystucng5rouil06.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
